
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Radu Cotescu's professional blog</title>
  <meta name="author" content="Radu Cotescu">

  
  <meta name="description" content="A passionate g33k sharing his experience about programming, Linux, virtualization and other computer related stuff.">
  <meta name="keywords" content="radu,cotescu,java,python,ubuntu,linux,oracle,programming,software,engineering">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://radu.cotescu.com/page/3">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.cotescu.com/raducotescu" rel="alternate" title="Radu Cotescu's professional blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8815189-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackPageLoadTime']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="top-nav">
    <ul>
        <li><a href="/" title="Home">127.0.0.1</a></li>
        <li><a href="/about/" title="About">About</a></li>
        <li><a href="/privacy-policy/" title="Privacy Policy">Privacy Policy</a></li>
        <li><a href="/calendar/" title="Calendar">Calendar</a></li>
        <li><a href="/talks/" title="Talks">Talks</a>
        <li><a href="/resume/" title="Resume">Resume</a></li>
    </ul>
  </div>
  <header role="banner"><hgroup>
  <h1><a href="/">Radu Cotescu's professional blog</a></h1>
  
    <h2>g33k w17h pa45510n</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.cotescu.com/raducotescu" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="https://feedburner.google.com/fb/a/mailverify?uri=raducotescu" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:radu.cotescu.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/category/-com">.com</a></li>
  <li><a href="/category/code">Code</a></li>
  <li><a href="/category/java">Java</a></li>
  <li><a href="/category/python">Python</a></li>
  <li><a href="/category/how-to">How To</a></li>
  <li><a href="/category/linux">Linux</a></li>
  <li><a href="/category/ubuntu">Ubuntu</a></li>
  <li><a href="/category/oracle">Oracle</a></li>
  <li><a href="/category/reviews">Reviews</a></li>
  <li><a href="/category/virtualization">Virtualization</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vmware-server-kernel-2-6-38/">How to Install VMware Server on Kernel Version 2.6.38</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-05T12:18:56+03:00" pubdate data-updated="true">May 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Notices:</h2>

<ul>
<li><p>VMware has declared VMware Server End Of Availability on January 2010 with the actual support ending on June 30th, 2011. More details can be read <a href="http://www.vmware.com/support/policies/lifecycle/general/index.html#policy_server">here</a>. Furthermore, VMware Server is not officially supported on Ubuntu releases greater than 8.04.</p></li>
<li><p>The VMware Server console plug-in won&#8217;t work on Firefox versions older than 3.6 (I have found no viable solution for this problem).</p></li>
</ul>


<p>The needed instructions for the installation can be found <a href="http://radu.cotescu.com/how-to-install-vmware-server-ubuntu-fedora-opensuse/">here</a>. For comments related to the installation on machines running the 2.6.38 kernel version please post here.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/ubuntu-flash-videos-fullscreen/">Ubuntu 64-bit and Flash Videos in Fullscreen</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-25T00:00:13+02:00" pubdate data-updated="true">Mar 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have never been an Adobe fan and something tells me that I won&#8217;t change my mind soon. One of the main reasons for which Linux had problems being a &#8220;normal&#8221; operating system for a quite long period of time (although there were other issues as well, but not as visible at this one) was that the Flash Player never really worked very well on this platform. Time passed and things began slowly to advance, however users of the 64-bit version of the Linux kernel had to use various hacks to run a 32-bit browser because of Flash.</p>

<h2>A little bit of history (and personal experience)</h2>

<p>Only when it reached version 10 Adobe managed to issue a native 64-bit version of their Flash plug-in for Linux, but it was a Labs attempt and therefore not considered a stable release. Still, it was the best way to enjoy Flash content on a 64-bit platform, even though there wasn&#8217;t a nice and easy way to install it (get an archive from Adobe, extract the <code>.so</code> file from it, and then using <code>sudo</code> move it to the proper location using the terminal). Nevertheless, everything worked smoothly, even 1080p videos in full screen, as long as you had a decent machine. Yeah, Flash is power hungry (not quite news&#8230;).</p>

<p>It didn&#8217;t last long until Adobe found out that version 10.0 had a major security bug, which led to the release of version 10.1. But because Linux users were (and probably still are) a negligible quantity, version 10.1 didn&#8217;t contain a 64-bit release for this platform. The &#8220;official&#8221; reasons were that Adobe wanted to work on version 10.2 which unified several technologies and therefore did not have to time to work on a Linux release. And then again, in order to avoid the security bugs, Linux users had to use the 32-bit Flash player wrapped with 32-bit compatible libraries on their 64-bit systems. And hell broke loose ever since because running Flash videos in fullscreen was a matter of luck, randomness and Adobe&#8217;s willingness to test video cards drivers.</p>

<p>Although <a href="http://radu.cotescu.com/geeks-and-their-computers/">Riker</a> has pretty powerful hardware components, a Flash video in fullscreen made it look ridiculous. Flash 10.2 (this time a native 64-bit release) didn&#8217;t seem to handle the problem better. Annoyed by such a trivial thing, I have started to look for a fix. It was weird that things were working with 10.0 and then degraded with newer releases. I know that my video driver hasn&#8217;t been updated since then, which clearly meant that the problem was on Adobe&#8217;s side.</p>

<h2>The fix</h2>

<p>Apparently, on UNIX (and consequently Linux) machines, the Flash player can read settings from two files:</p>

<ul>
<li><p><code>mm.cfg</code> - a file residing in each user&#8217;s home directory with per user settings</p></li>
<li><p><code>mms.cfg</code> - a file residing in <code>/etc/adobe</code> which sets things for the whole machine</p></li>
</ul>


<p>Because Flash uses its own mechanism to check for video card compatibility and then runs animations according to it, on some drivers it might fail to read properly the OpenGL specs of the card, which in turn leads to crappy performance in fullscreen (lags, unresponsiveness, browser crashes, etc.). To override the internal compatibility check (which Adobe says that might lead to crashes; ironic, isn&#8217;t it?!), one has to add a setting in the mms.cfg file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">OverrideGPUValidation</span><span class="o">=</span><span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once this is done, simply restart your browser and check how things are working. You might have a nice surprise. It&#8217;s amazing though how until 10.1 things were working as they should have without this override.</p>

<p>If by any chance that file, or even the <code>adobe</code> folder, is missing, use these commands:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo mkdir /etc/adobe <span class="c">#in case the folder is missing</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;OverrideGPUValidation=true&quot;</span> | sudo tee /etc/adobe/mms.cfg
</span></code></pre></td></tr></table></div></figure>


<p>Let&#8217;s hope though that 10.3 won&#8217;t require something more esoteric.</p>

<p>Source: <a href="http://blogs.adobe.com/penguinswf/2008/08/secrets_of_the_mmscfg_file_1.html">Secrets of The mms.cfg File</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/ssh-brute-force-attacks/">How to Secure Your SSH Server From Brute-force Attacks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-18T20:13:52+02:00" pubdate data-updated="true">Feb 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are a lot of tutorials online that will tell you how to secure your SSH server. Most of them will tell you not to allow the <code>root</code> account to login, to use only keys for authentication and possibly to change the port on which your server listens from 22 to any other. Although this is valid advice, there are times when due to zealous system administrators you <em>have</em> to use port 22 (because along with 21 and 80 it&#8217;s not blocked and you <em>do</em> like to check your server from time to time). Also, you might still want to use password authentication together with public and private keys just because there are chances that you might lose your keys (it happens to the best of us). Combine these two and you are exposing your server to a lot of brute-force attacks from various script kiddies.</p>

<p>If your SSH server (generally OpenSSH) is compiled to use <a href="http://en.wikipedia.org/wiki/TCP_Wrapper">TCP Wrapper</a> you can use <a href="http://denyhosts.sourceforge.net/">DenyHosts</a> to protect yourself against the annoying attempts to hack the server. However, if you don&#8217;t have the option to use a TCP Wrapper aware SSH server (which happens to be the case on almost all Linux distributions made to operate home-class routers), you&#8217;re pretty much on your own. Unless you&#8217;d like to use another script I wrote while I was bored.</p>

<p>The script analyses your SSH daemon&#8217;s log, identifies IPs from which there are unauthorized access attempts (the attackers usually try to login using a multitude of user/password combinations - brute-force attacks) and then denies all traffic from those IPs. Also it keeps a list of all those pesky &#8220;hackers&#8221; for times when you reboot (the part where you re-add those IPs to your <code>iptables</code> configuration is left as an exercise to you). The cherry on top of the cake is that for every bad IP the script tries to mail the ISP with the relevant parts from your log (in case you have configured <code>sendmail</code> or another MTA with a <code>sendmail</code> interface).</p>

<p>As usual, you can find the script in one of my GitHUB <a href="https://github.com/raducotescu/SSHBruteForceLogger">repos</a> with a nice README file giving you all the juicy configuration details.</p>

<p>If you can improve the script to do even more, please fork the repo. Also, if you find any bugs please let me know.</p>

<p><strong>TIP</strong>: if your kernel can use the recent module, you can add some rules like these:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m recent --set --name SSH
</span><span class='line'>iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m recent --update --seconds 60 --hitcount 8 --rttl --name SSH -j LOG --log-prefix <span class="s2">&quot;SSH_brute_force &quot;</span>
</span><span class='line'>iptables -A INPUT -p tcp --dport 22 -m state --state NEW -m recent --update --seconds 60 --hitcount 8 --rttl --name SSH -j DROP
</span></code></pre></td></tr></table></div></figure>


<p>This would assure that a user cannot open more than 8 connections in 60 seconds to your server on port 22. Of course, if the user tries to open a ninth connection, <code>iptables</code> will block the access for 60 seconds. This is just an extra measure to protect your server in addition to the script.</p>

<p>Don&#8217;t let the &#8220;hackers&#8221; win!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/java-https-rest-services-apache-cxf/">Java, HTTPS and REST Web Services Using Apache CXF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-16T23:39:23+02:00" pubdate data-updated="true">Dec 16<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Securing REST web services</strong> is a very debated topic on the Internet. Because REST represents an architecture, and not a protocol - like SOAP -, there aren&#8217;t any specifications dealing with security, leaving this aspect as a design decision for the software engineers / developers. Still, if you search the web to find out what are the approaches, you&#8217;ll see that most of the results suggest you use <strong><a href="http://en.wikipedia.org/wiki/Basic_access_authentication">basic authentication</a> over <a href="http://en.wikipedia.org/wiki/HTTP_Secure">HTTPS</a></strong>.</p>

<p>The basic authentication is a trivial way of authenticating HTTP requests directly by the web server, without any added effort for the developer. Since REST isn&#8217;t very pretentious (it uses the well known HTTP methods for accessing resources), leaving the authentication to the web server is a natural thing to do. Still, this doesn&#8217;t mean that your REST API is secure. You merely separate users that should have access to your API from users that should be denied access. Enabling HTTPS on the server is the next step that needs to be followed, so that all the requests are secured. This avoids the classical man-in-the-middle attack and also assures that the credentials sent by the users aren&#8217;t visible to the whole world (although they are BASE64 encoded by the basic authentication mechanism, decoding them is a child&#8217;s play).</p>

<h2>A practical example</h2>

<p>For the next paragraphs, I will be very specific (the title should have already told you this). To add something more, let&#8217;s assume you use <strong>Maven</strong> (because you&#8217;re a real developer) and <strong>Jetty</strong> (only for testing - I assume that for production you use a proper server, like Tomcat). Enabling HTTPS on any other server shouldn&#8217;t be much different.</p>

<h3><code>pom.xml</code></h3>

<p>To enable HTTPS and basic user authentication on Jetty by using Maven, you would have to use an additional plug-in for generating keystores, unless you already have a keystore that you would like to use, in which case you should not keep it in the <code>target</code> folder of your project. The following section of <code>pom.xml</code> should do the trick:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>  <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;artifactId&gt;</span>keytool-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>      <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>          <span class="nt">&lt;phase&gt;</span>generate-resources<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>          <span class="nt">&lt;id&gt;</span>clean<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>          <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>              <span class="nt">&lt;goal&gt;</span>clean<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>      <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>          <span class="nt">&lt;phase&gt;</span>generate-resources<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>          <span class="nt">&lt;id&gt;</span>genkey<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>          <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>              <span class="nt">&lt;goal&gt;</span>genkey<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>  <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>      <span class="nt">&lt;keystore&gt;</span>${project.build.directory}/jetty-ssl.keystore<span class="nt">&lt;/keystore&gt;</span>
</span><span class='line'>      <span class="nt">&lt;dname&gt;</span>cn=server_host_name<span class="nt">&lt;/dname&gt;</span>
</span><span class='line'>      <span class="nt">&lt;keypass&gt;</span>jetty6<span class="nt">&lt;/keypass&gt;</span>
</span><span class='line'>      <span class="nt">&lt;storepass&gt;</span>jetty6<span class="nt">&lt;/storepass&gt;</span>
</span><span class='line'>      <span class="nt">&lt;alias&gt;</span>jetty6<span class="nt">&lt;/alias&gt;</span>
</span><span class='line'>      <span class="nt">&lt;keyalg&gt;</span>RSA<span class="nt">&lt;/keyalg&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'><span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>  <span class="c">&lt;!-- Jetty support for testing --&gt;</span>
</span><span class='line'><span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>  <span class="nt">&lt;groupId&gt;</span>org.mortbay.jetty<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;artifactId&gt;</span>maven-jetty-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>      <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>          <span class="nt">&lt;id&gt;</span>start-jetty<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>          <span class="nt">&lt;phase&gt;</span>pre-integration-test<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>          <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>              <span class="nt">&lt;goal&gt;</span>run<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>          <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>              <span class="nt">&lt;scanIntervalSeconds&gt;</span>0<span class="nt">&lt;/scanIntervalSeconds&gt;</span>
</span><span class='line'>              <span class="nt">&lt;daemon&gt;</span>true<span class="nt">&lt;/daemon&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>      <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>          <span class="nt">&lt;id&gt;</span>stop-jetty<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>          <span class="nt">&lt;phase&gt;</span>post-integration-test<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>          <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>              <span class="nt">&lt;goal&gt;</span>stop<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>  <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>      <span class="nt">&lt;stopKey&gt;</span>foo<span class="nt">&lt;/stopKey&gt;</span>
</span><span class='line'>      <span class="nt">&lt;stopPort&gt;</span>9999<span class="nt">&lt;/stopPort&gt;</span>
</span><span class='line'>      <span class="nt">&lt;scanIntervalSeconds&gt;</span>2<span class="nt">&lt;/scanIntervalSeconds&gt;</span>
</span><span class='line'>      <span class="nt">&lt;contextPath&gt;</span>/restws<span class="nt">&lt;/contextPath&gt;</span>
</span><span class='line'>      <span class="nt">&lt;userRealms&gt;</span>
</span><span class='line'>          <span class="nt">&lt;userRealm</span> <span class="na">implementation=</span><span class="s">&quot;org.mortbay.jetty.security.HashUserRealm&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>              <span class="nt">&lt;name&gt;</span>name_of_realm<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>              <span class="nt">&lt;config&gt;</span>src/main/resources/sec.properties<span class="nt">&lt;/config&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/userRealm&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/userRealms&gt;</span>
</span><span class='line'>      <span class="nt">&lt;connectors&gt;</span>
</span><span class='line'>          <span class="nt">&lt;connector</span> <span class="na">implementation=</span><span class="s">&quot;org.mortbay.jetty.nio.SelectChannelConnector&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>              <span class="nt">&lt;port&gt;</span>8080<span class="nt">&lt;/port&gt;</span>
</span><span class='line'>              <span class="nt">&lt;maxIdleTime&gt;</span>60000<span class="nt">&lt;/maxIdleTime&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/connector&gt;</span>
</span><span class='line'>          <span class="nt">&lt;connector</span> <span class="na">implementation=</span><span class="s">&quot;org.mortbay.jetty.security.SslSocketConnector&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>              <span class="nt">&lt;port&gt;</span>8443<span class="nt">&lt;/port&gt;</span>
</span><span class='line'>              <span class="nt">&lt;maxIdleTime&gt;</span>60000<span class="nt">&lt;/maxIdleTime&gt;</span>
</span><span class='line'>              <span class="nt">&lt;keystore&gt;</span>${project.build.directory}/jetty-ssl.keystore<span class="nt">&lt;/keystore&gt;</span>
</span><span class='line'>              <span class="nt">&lt;password&gt;</span>jetty6<span class="nt">&lt;/password&gt;</span>
</span><span class='line'>              <span class="nt">&lt;keyPassword&gt;</span>jetty6<span class="nt">&lt;/keyPassword&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/connector&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/connectors&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'><span class="nt">&lt;/plugin&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The highlighted lines indicate the user <strong>realm</strong>. This is a file which describes to the server who are your users and what roles are they assigned. The specified file contains records of this form:</p>

<p><code>
user: password,role
</code></p>

<h3><code>web.xml</code></h3>

<p>Now you must configure your web application to accept HTTPS encrypted content. This is done in the <strong>web.xml</strong> file, by adding the following lines of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;security-constraint&gt;</span>
</span><span class='line'>  <span class="nt">&lt;web-resource-collection&gt;</span>
</span><span class='line'>      <span class="nt">&lt;web-resource-name&gt;</span>application_name<span class="nt">&lt;/web-resource-name&gt;</span>
</span><span class='line'>  <span class="c">&lt;!-- all URLs are protected --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/web-resource-collection&gt;</span>
</span><span class='line'>  <span class="nt">&lt;auth-constraint&gt;</span>
</span><span class='line'>      <span class="nt">&lt;role-name&gt;</span>user<span class="nt">&lt;/role-name&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/auth-constraint&gt;</span>
</span><span class='line'>  <span class="nt">&lt;user-data-constraint&gt;</span>
</span><span class='line'>      <span class="c">&lt;!-- redirect all requests to HTTPS --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;transport-guarantee&gt;</span>CONFIDENTIAL<span class="nt">&lt;/transport-guarantee&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/user-data-constraint&gt;</span>
</span><span class='line'><span class="nt">&lt;/security-constraint&gt;</span>
</span><span class='line'><span class="nt">&lt;login-config&gt;</span>
</span><span class='line'>  <span class="nt">&lt;auth-method&gt;</span>BASIC<span class="nt">&lt;/auth-method&gt;</span>
</span><span class='line'>  <span class="nt">&lt;realm-name&gt;</span>name_of_realm<span class="nt">&lt;/realm-name&gt;</span>
</span><span class='line'><span class="nt">&lt;/login-config&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>REST web services and Apache CXF</h3>

<p>So, everything is set up and working. Well, almost. If your REST web services also include some client code, you might encounter an exception with the following message:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">javax</span><span class="o">.</span><span class="na">net</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">SSLHandshakeException</span><span class="o">:</span> <span class="n">sun</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">validator</span><span class="o">.</span><span class="na">ValidatorException</span><span class="o">:</span> <span class="n">PKIX</span> <span class="n">path</span> <span class="n">building</span> <span class="nl">failed:</span> <span class="n">sun</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">certpath</span><span class="o">.</span><span class="na">SunCertPathBuilderException</span><span class="o">:</span> <span class="n">unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">valid</span> <span class="n">certification</span> <span class="n">path</span> <span class="n">to</span> <span class="n">requested</span> <span class="n">target</span>
</span></code></pre></td></tr></table></div></figure>


<p>The exception is thrown because the certificate your server uses is not from a known <strong>Certificate Authority</strong>. If you have studied the POM example, you&#8217;d see that the certificate is generated at every execution of the <code>install</code> goal. Moreover, the certificate is self-signed. From here we have two solutions:</p>

<ol>
<li><p>try to create a single key store and save it in the <code>src</code> folder, configuring the server to use the file from this location; then start the server and use the program written by Andreas Sterbenz which you can find <a href="http://blogs.sun.com/andreas/entry/no_more_unable_to_find">here</a>; grab the certificate and move the resulted file into the security folder of your JRE (on Linux this should be <code>/usr/lib/jvm/java-6-sun/jre/lib/security/</code>); although this will work okay on your machine, if your project should be accessed by multiple developers, each member of the team has to add that certificate to his/hers JVM (which is not quite nice);</p></li>
<li><p>create an<strong> alternative <code>TrustStore</code></strong> used only by your application; this is by far the most elegant solution, which adds some more code to the application but doesn&#8217;t force your team members to add dummy certificates to their JVM.</p></li>
</ol>


<h4>Implementing the <code>TrustStore</code></h4>

<p>The class implementing the <code>X509TrustManager</code> is trivial:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FakeTrustManager</span> <span class="kd">implements</span> <span class="n">javax</span><span class="o">.</span><span class="na">net</span><span class="o">.</span><span class="na">ssl</span><span class="o">.</span><span class="na">X509TrustManager</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">public</span> <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">cert</span><span class="o">.</span><span class="na">X509Certificate</span><span class="o">[]</span> <span class="nf">getAcceptedIssuers</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkClientTrusted</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">cert</span><span class="o">.</span><span class="na">X509Certificate</span><span class="o">[]</span> <span class="n">certs</span><span class="o">,</span>
</span><span class='line'>          <span class="n">String</span> <span class="n">authType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkServerTrusted</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">cert</span><span class="o">.</span><span class="na">X509Certificate</span><span class="o">[]</span> <span class="n">certs</span><span class="o">,</span>
</span><span class='line'>          <span class="n">String</span> <span class="n">authType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>To make all your <strong>Apache CXF REST</strong> <strong>clients</strong> use the new trust store, it is necessary to create a static method in an utility class that sets everything up for the clients:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setClientAuthentication</span><span class="o">(</span><span class="n">Object</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">Properties</span> <span class="n">p</span> <span class="o">=</span> <span class="n">PropertiesLoader</span>
</span><span class='line'>          <span class="o">.</span><span class="na">getPropertiesFromFile</span><span class="o">(</span><span class="s">&quot;config.properties&quot;</span><span class="o">);</span>
</span><span class='line'>  <span class="n">ClientConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">getConfig</span><span class="o">(</span><span class="n">client</span><span class="o">);</span>
</span><span class='line'>  <span class="n">HTTPConduit</span> <span class="n">httpConduit</span> <span class="o">=</span> <span class="o">(</span><span class="n">HTTPConduit</span><span class="o">)</span> <span class="n">config</span><span class="o">.</span><span class="na">getConduit</span><span class="o">();</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;user.name&quot;</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span>
</span><span class='line'>          <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;user.password&quot;</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">AuthorizationPolicy</span> <span class="n">authorization</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorizationPolicy</span><span class="o">();</span>
</span><span class='line'>      <span class="n">authorization</span><span class="o">.</span><span class="na">setUserName</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;user.name&quot;</span><span class="o">));</span>
</span><span class='line'>      <span class="n">authorization</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;user.password&quot;</span><span class="o">));</span>
</span><span class='line'>      <span class="n">httpConduit</span><span class="o">.</span><span class="na">setAuthorization</span><span class="o">(</span><span class="n">authorization</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="n">TLSClientParameters</span> <span class="n">tlsParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TLSClientParameters</span><span class="o">();</span>
</span><span class='line'>  <span class="n">TrustManager</span><span class="o">[]</span> <span class="n">trustAllCerts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TrustManager</span><span class="o">[]</span> <span class="o">{</span> <span class="k">new</span> <span class="n">FakeTrustManager</span><span class="o">()</span> <span class="o">};</span>
</span><span class='line'>  <span class="n">tlsParams</span><span class="o">.</span><span class="na">setTrustManagers</span><span class="o">(</span><span class="n">trustAllCerts</span><span class="o">);</span>
</span><span class='line'>  <span class="c1">// disables verification of the common name (the host for which the certificate has been issued)</span>
</span><span class='line'>  <span class="n">tlsParams</span><span class="o">.</span><span class="na">setDisableCNCheck</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span><span class='line'>  <span class="n">httpConduit</span><span class="o">.</span><span class="na">setTlsClientParameters</span><span class="o">(</span><span class="n">tlsParams</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The properties file you see loaded in the previous code output contains the username and password for authentication, but it&#8217;s different from the realm. This is because the realm would be harder to parse, although the information is still plain text. Although it might seem redundant to have the username and password in two files, the realm can actually hold users belonging to different roles - therefore the parsing effort.</p>

<p>The <code>PropertiesLoader</code> class is not standard, but again it&#8217;s something trivial:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PropertiesLoader</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Properties</span> <span class="nf">getPropertiesFromFile</span><span class="o">(</span><span class="n">String</span> <span class="n">propertiesFile</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">Properties</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>
</span><span class='line'>      <span class="n">ClassLoader</span> <span class="n">loader</span> <span class="o">=</span> <span class="n">PropertiesLoader</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">();</span>
</span><span class='line'>      <span class="k">if</span> <span class="o">(</span><span class="n">loader</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">loader</span> <span class="o">=</span> <span class="n">ClassLoader</span><span class="o">.</span><span class="na">getSystemClassLoader</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="na">getResource</span><span class="o">(</span><span class="n">propertiesFile</span><span class="o">);</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">p</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">());</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Could not load configuration file: &quot;</span>
</span><span class='line'>                  <span class="o">+</span> <span class="n">propertiesFile</span><span class="o">);</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">p</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Having done all this, your clients should now work as expected. Just remember that the <code>FakeTrustStore</code> is to be used <em>only</em> for testing purposes.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/ubuntu-internet-connection-sharing-wireless/">Ubuntu and Internet Connection Sharing via a Wireless Card</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-27T18:37:46+02:00" pubdate data-updated="true">Nov 27<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sharing your Internet connection is the poor man&#8217;s way of creating an access point using one of your PCs as the gateway. This implies that the PC (gateway) that you want to use for this has two network cards:</p>

<ul>
<li><p>an Ethernet card (<a href="http://en.wikipedia.org/wiki/Network_interface_controller">NIC</a>) connected to a network (LAN) with Internet access</p></li>
<li><p>a wireless network interface card (<a href="http://en.wikipedia.org/wiki/Wireless_network_interface_card">WNIC</a>) used to share the Internet connection</p></li>
</ul>


<p>Setting up ICS on an Ubuntu machine is a very straight-forward process:</p>

<ol>
<li><p>Click on the <em>Network Manager</em> icon and select the <em>Create New Wireless Network&#8230;</em> menu entry
<a href="/uploads/wpuploads/2010/11/wifi-1.png"><img src="/uploads/wpuploads/2010/11/wifi-1-300x199.png" alt="Step 1. Create New Wireless Network" /></a></p></li>
<li><p>Enter the details you want for this new &#8220;ad-hoc&#8221; network. WPA is not supported, so your only options for &#8220;Wireless Security&#8221; are &#8220;None&#8221; (although I wouldn&#8217;t call this security) or the WEP settings (not a secure algorithm, but hopefully your neighbours don&#8217;t use WireShark to crack your network). For the WEP 40/128-bit Key option, you key has to be exactly 5/10/13 characters long. If you want to be able to connect <strong><em>Windows clients</em></strong> to your network, the only option that worked for me is <em><strong>WEP 40/128-bit Key with a 13 characters key</strong></em>. <em><strong>An Ubuntu machine won&#8217;t have any problems with either options</strong></em>. Click on <em>Create</em>. <em>Network Manager</em> will automatically connect to this new network you have just created.
<a href="/uploads/wpuploads/2010/11/wifi-2.png"><img src="/uploads/wpuploads/2010/11/wifi-2-300x200.png" alt="Step 2. New wireless network" /></a></p></li>
<li><p>After your PC has connected (self-connected) to the &#8220;ad-hoc&#8221; network, you have to make sure that this connection is shared to other computers and devices (clients). Right click on the <em>Network Manager</em> icon and select <em>Edit Connections&#8230;</em> Select the <em>Wireless</em> tab, select your recently created connection and click on <em>Edit</em>. Make sure that the <em>Connect automatically</em> check-box is selected and on the <em>IPv4 Settings</em> tab male sure that the <em>Method</em> option is set to <em>Shared to other computers</em>.
<a href="/uploads/wpuploads/2010/11/wifi-3.png"><img src="/uploads/wpuploads/2010/11/wifi-3-300x263.png" alt="Step 3. Ad-Hoc network settings" /></a></p></li>
<li><p>Ensure that you do have the <code>dnsmasq-base</code> package installed (you can check usiny <em>Synaptic</em>). This is a DNS / DHCP server which will not run as a daemon, but as a background program, launched by the <em>Network Manager</em>.</p></li>
<li><p>To be sure that your clients will receive an IP check that your firewall allows connections from and to the new network you have just created. Given the following command, you should see a similar output:</p></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>radu@riker:~<span class="nv">$ </span>sudo iptables -L
</span><span class='line'><span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for </span>radu:
</span><span class='line'>Chain FORWARD <span class="o">(</span>policy ACCEPT<span class="o">)</span>
</span><span class='line'>target     prot opt <span class="nb">source               </span>destination
</span><span class='line'>ACCEPT     all  --  anywhere             10.42.43.0/24       state RELATED,ESTABLISHED
</span><span class='line'>ACCEPT     all  --  10.42.43.0/24        anywhere
</span></code></pre></td></tr></table></div></figure>


<p>Enjoy browsing! I told you this was simple.</p>

<p>P.S. I would like to thank <a href="http://vlad.nastasiu.com/">Vlad</a> for helping me correct the information provided about clients&#8217; IPs and the fact that the gateway will provide the necessary data through DHCP.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/remapping-keys-in-ubuntu-14.04/">Remapping Keys in Ubuntu 14.04</a>
      </li>
    
      <li class="post">
        <a href="/coloured-log-outputs/">Coloured log outputs on Unix/Linux</a>
      </li>
    
      <li class="post">
        <a href="/java-common-sense/">A useful rant on how people write Java code</a>
      </li>
    
      <li class="post">
        <a href="/tools-required-for-opening-a-macbook-pro/">Tools required for opening a MacBook Pro</a>
      </li>
    
      <li class="post">
        <a href="/the-switch-to-mac-from-ubuntu/">Switching to Mac from Ubuntu</a>
      </li>
    
  </ul>
</section>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8659561010253809";
/* Sidebar250x250 */
google_ad_slot = "8430472643";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

<section>
  <h2>Latest Tweets</h2>
  <a class="twitter-timeline" href="https://twitter.com/raducotescu" data-widget-id="323192190111203328">Tweets by @raducotescu</a>
  <script>
  !function(d,s,id) {
    var js,
        fjs = d.getElementsByTagName(s)[0],
        p = /^http:/.test(d.location) ? 'http' : 'https';
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = p + "://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);
        }
  }(document,"script","twitter-wjs");
  </script>
</section>




<section class="googleplus">
  <h1>
    <a href="//plus.google.com/+RaduCotescu?rel=author">
      <img src="//www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  &copy; 2009 - 2014 - Radu Cotescu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  


</body>
</html>
