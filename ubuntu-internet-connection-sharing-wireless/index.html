
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ubuntu and Internet Connection Sharing via a wireless card - Radu Cotescu's professional blog</title>
  <meta name="author" content="Radu Cotescu">

  
  <meta name="description" content="Creating a shared Internet connection in Ubuntu is very easy. Learn how to do it in 5 easy steps.">
  <meta name="keywords" content="internet, connection, sharing, wireless, card, linux, router, client, gateway">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://raducotescu.github.com/radu/ubuntu-internet-connection-sharing-wireless">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.cotescu.com/raducotescu" rel="alternate" title="Radu Cotescu's professional blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8815189-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackPageLoadTime']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="top-nav">
    <ul>
        <li><a href="/" title="Home">127.0.0.1</a></li>
        <li><a href="/about/" title="About">About</a></li>
        <li><a href="/privacy-policy/" title="Privacy Policy">Privacy Policy</a></li>
        <li><a href="/calendar/" title="Calendar">Calendar</a></li>
        <li><a href="/resume/" title="Resume">Resume</a></li>
    </ul>
  </div>
  <header role="banner"><hgroup>
  <h1><a href="/">Radu Cotescu's professional blog</a></h1>
  
    <h2>g33k w17h pa45510n</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.cotescu.com/raducotescu" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=raducotescu" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:raducotescu.github.com/radu" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/category/-com">.com</a></li>
  <li><a href="/category/code">Code</a></li>
  <li><a href="/category/java">Java</a></li>
  <li><a href="/category/python">Python</a></li>
  <li><a href="/category/how-to">How To</a></li>
  <li><a href="/category/linux">Linux</a></li>
  <li><a href="/category/ubuntu">Ubuntu</a></li>
  <li><a href="/category/oracle">Oracle</a></li>
  <li><a href="/category/reviews">Reviews</a></li>
  <li><a href="/category/virtualization">Virtualization</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Ubuntu and Internet Connection Sharing via a Wireless Card</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-27T18:37:46+02:00" pubdate data-updated="true">Nov 27<span>th</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Sharing your Internet connection is the poor man&#8217;s way of creating an access point using one of your PCs as the gateway. This implies that the PC (gateway) that you want to use for this has two network cards:</p>

<ul>
<li><p>an Ethernet card (<a href="http://en.wikipedia.org/wiki/Network_interface_controller">NIC</a>) connected to a network (LAN) with Internet access</p></li>
<li><p>a wireless network interface card (<a href="http://en.wikipedia.org/wiki/Wireless_network_interface_card">WNIC</a>) used to share the Internet connection</p></li>
</ul>


<p>Setting up ICS on an Ubuntu machine is a very straight-forward process:</p>

<ol>
<li><p>Click on the <em>Network Manager</em> icon and select the <em>Create New Wireless Network&#8230;</em> menu entry
<a href="/uploads/wpuploads/2010/11/wifi-1.png"><img src="/uploads/wpuploads/2010/11/wifi-1-300x199.png" alt="Step 1. Create New Wireless Network" /></a></p></li>
<li><p>Enter the details you want for this new &#8220;ad-hoc&#8221; network. WPA is not supported, so your only options for &#8220;Wireless Security&#8221; are &#8220;None&#8221; (although I wouldn&#8217;t call this security) or the WEP settings (not a secure algorithm, but hopefully your neighbours don&#8217;t use WireShark to crack your network). For the WEP 40/128-bit Key option, you key has to be exactly 5/10/13 characters long. If you want to be able to connect <strong><em>Windows clients</em></strong> to your network, the only option that worked for me is <em><strong>WEP 40/128-bit Key with a 13 characters key</strong></em>. <em><strong>An Ubuntu machine won&#8217;t have any problems with either options</strong></em>. Click on <em>Create</em>. <em>Network Manager</em> will automatically connect to this new network you have just created.
<a href="/uploads/wpuploads/2010/11/wifi-2.png"><img src="/uploads/wpuploads/2010/11/wifi-2-300x200.png" alt="Step 2. New wireless network" /></a></p></li>
<li><p>After your PC has connected (self-connected) to the &#8220;ad-hoc&#8221; network, you have to make sure that this connection is shared to other computers and devices (clients). Right click on the <em>Network Manager</em> icon and select <em>Edit Connections&#8230;</em> Select the <em>Wireless</em> tab, select your recently created connection and click on <em>Edit</em>. Make sure that the <em>Connect automatically</em> check-box is selected and on the <em>IPv4 Settings</em> tab male sure that the <em>Method</em> option is set to <em>Shared to other computers</em>.
<a href="/uploads/wpuploads/2010/11/wifi-3.png"><img src="/uploads/wpuploads/2010/11/wifi-3-300x263.png" alt="Step 3. Ad-Hoc network settings" /></a></p></li>
<li><p>Ensure that you do have the <code>dnsmasq-base</code> package installed (you can check usiny <em>Synaptic</em>). This is a DNS / DHCP server which will not run as a daemon, but as a background program, launched by the <em>Network Manager</em>.</p></li>
<li><p>To be sure that your clients will receive an IP check that your firewall allows connections from and to the new network you have just created. Given the following command, you should see a similar output:</p></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>radu@riker:~<span class="nv">$ </span>sudo iptables -L
</span><span class='line'><span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for </span>radu:
</span><span class='line'>Chain FORWARD <span class="o">(</span>policy ACCEPT<span class="o">)</span>
</span><span class='line'>target     prot opt <span class="nb">source               </span>destination
</span><span class='line'>ACCEPT     all  --  anywhere             10.42.43.0/24       state RELATED,ESTABLISHED
</span><span class='line'>ACCEPT     all  --  10.42.43.0/24        anywhere
</span></code></pre></td></tr></table></div></figure>


<p>Enjoy browsing! I told you this was simple.</p>

<p>P.S. I would like to thank <a href="http://vlad.nastasiu.com/">Vlad</a> for helping me correct the information provided about clients&#8217; IPs and the fact that the gateway will provide the necessary data through DHCP.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Radu Cotescu</span></span>

      








  


<time datetime="2010-11-27T18:37:46+02:00" pubdate data-updated="true">Nov 27<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/category/how-to/'>How To</a>, <a class='category' href='/category/ubuntu/'>Ubuntu</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  	<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://raducotescu.github.com/radu/ubuntu-internet-connection-sharing-wireless/" data-via="raducotescu" data-counturl="http://raducotescu.github.com/radu/ubuntu-internet-connection-sharing-wireless/" >Tweet</a>
  	
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  
  
  	<div class="g-plusone" data-size="medium"></div>
  	
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
    
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/how-to-install-vmware-server-kernel-2-6-35/" title="Previous Post: How to install VMware Server on 2.6.35 kernels">&laquo; How to install VMware Server on 2.6.35 kernels</a>
      
      
        <a class="basic-alignment right" href="/java-https-rest-services-apache-cxf/" title="Next Post: Java, HTTPS and REST web services using Apache CXF">Java, HTTPS and REST web services using Apache CXF &raquo;</a>
      
    </p>
  </footer>
</article>

  <section style="margin-bottom: 30px">
    <div id="google-ads-comments" style="margin: 0 auto auto; text-align: center">
      <script type="text/javascript"><!--
        google_ad_client = "ca-pub-8659561010253809";
        /* NearCommentsBox468x60 */
        google_ad_slot = "0858986716";
        google_ad_width = 468;
        google_ad_height = 60;
      //-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
    </div>
  </section>
  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    

<script type="text/javascript">
      var disqus_shortname = 'raducotescu';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://raducotescu.github.com/radu/ubuntu-internet-connection-sharing-wireless/';
        var disqus_url = 'http://raducotescu.github.com/radu/ubuntu-internet-connection-sharing-wireless/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/tools-required-for-opening-a-macbook-pro/">Tools required for opening a MacBook Pro</a>
      </li>
    
      <li class="post">
        <a href="/the-switch-to-mac-from-ubuntu/">Switching to Mac from Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/migrating-your-ubuntu-machine-to-a-ssd-drive/">Migrating your Ubuntu machine to a SSD drive</a>
      </li>
    
      <li class="post">
        <a href="/why-awk-is-better-than-cut/">Why awk is better than cut</a>
      </li>
    
      <li class="post">
        <a href="/bash-old-kernel-artefacts/">Bash one-liner for removing old kernel artefacts</a>
      </li>
    
  </ul>
</section>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8659561010253809";
/* Sidebar250x250 */
google_ad_slot = "8430472643";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

<section>
  <h1>Latest Tweets</h1>
    <script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
    <script>
    new TWTR.Widget({
      version: 2,
      type: 'profile',
      rpp: 5,
      interval: 30000,
      width: 250,
      height: 370,
      theme: {
        shell: {
          background: '#cfcfcf',
          color: '#ffffff'
        },
        tweets: {
          background: '#e8e8e8',
          color: '#4b4b4b',
          links: '#0182eb'
        }
      },
      features: {
        scrollbar: false,
        loop: false,
        live: true,
        behavior: 'all'
      }
    }).render().setUser('raducotescu').start();
    </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/114474556850700711159?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  &copy; 2009 - 2012 - Radu Cotescu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  


</body>
</html>
